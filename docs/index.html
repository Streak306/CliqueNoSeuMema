<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Clique no seu Mema</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
  <div id="upgradeTooltip" class="tooltip-card" role="tooltip" aria-hidden="true">
    <div class="tooltip-name"></div>
    <div class="tooltip-effect"></div>
    <div class="tooltip-cost"></div>
  </div>
  <div id="buffTooltip" class="tooltip-card tooltip-card--buff" role="tooltip" aria-hidden="true">
    <div class="tooltip-name"></div>
    <div class="tooltip-effect"></div>
    <div class="tooltip-meta"></div>
  </div>
<body>
<div class="wrap layout-root">
  <!--
    Layout reorganizado para topo fixo com estatísticas + botão central (Messias),
    divisórias usando barra.png e painéis laterais com rolagem própria (upgrades à esquerda, loja à direita).
    Arquivos ajustados: index.html e styles/main.css. Novos contêineres: layout-root, top-area, top-stage, panel/panel-header/panel-content.
  -->
  <!-- TOPO -->
  <section class="top-area" aria-label="Painel superior">
    <header class="top-header">
      <div class="top-info">
        <h1>Memarkez</h1>
        <div class="top-meta">
          <div class="stats">
            <span class="pill">Meminha: <b id="pts">0</b></span>
            <span class="pill">Por clique: <b id="pc">1</b></span>
            <span class="pill">MPS: <b id="mps">0</b></span>
          </div>
          <button class="btn settings-btn" id="openSettings" aria-haspopup="dialog">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 3.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9c.27.51.41 1.08.4 1.66V11a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
            Configurações
          </button>
        </div>
      </div>
      <div class="buff-hud" id="buffHud" aria-live="polite" aria-label="Efeitos ativos"></div>
    </header>

    <div class="top-stage">
      <section class="stage" aria-label="Área principal do Messias">
        <img id="click" class="click-img" src="assets/images/variacoes-mema/mema_back.png" alt="Clique no seu Mema">
      </section>
    </div>
  </section>

  <!-- GRID -->
  <main class="grid bottom-panels" aria-label="Painéis inferiores">
    <aside class="card panel upgrades-card">
      <div class="panel-header">
        <h3 class="upgrades-title">Upgrades</h3>
        <p class="muted upgrades-sub">Desbloqueie melhorias comprando prédios específicos e conquiste cliques mais fortes.</p>
      </div>
      <div class="panel-content">
        <div id="upgradesGrid" class="upgrade-grid"></div>
      </div>
    </aside>

    <aside class="card panel shop-card">
      <div class="panel-header">
        <div class="shop-title">Loja</div>
      </div>
      <div class="panel-content">
        <table class="shop">
          <thead>
            <tr>
              <th>Item</th>
              <th>+MPS</th>
              <th>Qtde</th>
            </tr>
          </thead>
          <tbody id="shopBody"></tbody>
        </table>
        <p class="muted" style="margin-top:8px">Passe o mouse e clique na linha para comprar. Itens seguintes aparecem somente após comprar 1 do anterior.</p>
      </div>
    </aside>
  </main>
</div>

<div id="settingsModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card">
    <div class="modal-header">
      <h2>Configurações</h2>
      <button class="modal-close" id="closeSettings" aria-label="Fechar">×</button>
    </div>
    <div class="modal-tabs" role="tablist">
      <button class="modal-tab active" data-tab="config" role="tab" aria-selected="true">Geral</button>
      <button class="modal-tab" data-tab="upgrades" role="tab" aria-selected="false">Melhorias</button>
      <button class="modal-tab" data-tab="achievements" role="tab" aria-selected="false">Conquistas</button>
    </div>
    <div class="modal-content">
      <div class="modal-panel active" data-panel="config" role="tabpanel">
        <p class="muted">Gerencie seu progresso e preferências.</p>
        <section class="settings-section" aria-labelledby="numberFormatTitle">
          <h3 id="numberFormatTitle">Formato dos números</h3>
          <p class="muted">Escolha como os valores aparecem em todo o jogo.</p>
          <div class="number-format-options" role="group" aria-label="Opções de formatação numérica">
            <button class="btn number-format-option" data-number-format="power">Potência de 10</button>
            <button class="btn number-format-option" data-number-format="exact">Valor exato</button>
            <button class="btn number-format-option" data-number-format="name">Nome</button>
            <button class="btn number-format-option" data-number-format="suffix">Sufixo</button>
          </div>
        </section>
        <section class="settings-section" aria-labelledby="volumeTitle">
          <h3 id="volumeTitle">Volume geral</h3>
          <p class="muted">Ajuste o volume dos sons do jogo.</p>
          <div class="settings-slider">
            <input type="range" id="masterVolume" min="0" max="100" step="1" value="75" aria-label="Volume geral (0 a 100)">
            <span id="masterVolumeValue" class="settings-slider__value">75%</span>
          </div>
        </section>
        <button class="btn" id="redeemCode" style="margin-top:12px;max-width:220px;">Inserir código</button>
        <button class="btn" id="deleteSave" style="margin-top:12px;max-width:220px;border-color:#3a2224;background:#24181a;color:#ef4444">Apagar save</button>
      </div>
      <div class="modal-panel" data-panel="upgrades" role="tabpanel" aria-hidden="true">
        <div class="stats-grid">
          <div class="stat-card"><span>Meminhas no banco</span><strong id="statBanco">0</strong></div>
          <div class="stat-card"><span>Tempo de jogo</span><strong id="statTempo">0:00</strong></div>
          <div class="stat-card"><span>Construções obtidas</span><strong id="statConstr">0</strong></div>
          <div class="stat-card"><span>Meminhas por segundo</span><strong id="statMps">0</strong></div>
          <div class="stat-card"><span>Meminhas por clique</span><strong id="statClique">0</strong></div>
          <div class="stat-card"><span>Cliques no Meminha</span><strong id="statCliques">0</strong></div>
          <div class="stat-card"><span>Meminhas feitos com click</span><strong id="statHandmade">0</strong></div>
        </div>
        <div class="collection-header">
          <h3 style="margin:0">Coleção de melhorias</h3>
          <span class="collection-count" id="collectionCount">Você tem 0/0 melhorias</span>
        </div>
        <div class="collection-section">
          <div class="collection-grid" id="ownedUpgradesGrid"></div>
          <aside class="collection-details" id="collectionDetails">
            <h4 id="collectionDetailName">Selecione uma melhoria</h4>
            <p id="collectionDetailEffect">Passe o mouse ou toque em uma melhoria para ver detalhes.</p>
            <div class="collection-detail-meta">
              <div>
                <span class="label">Custo</span>
                <strong id="collectionDetailCost">—</strong>
              </div>
              <div>
                <span class="label">Requisitos</span>
                <ul id="collectionDetailRequirements"><li>—</li></ul>
              </div>
            </div>
            <div class="collection-detail-ownership" id="collectionDetailOwnership"></div>
          </aside>
        </div>
      </div>
      <div class="modal-panel" data-panel="achievements" role="tabpanel" aria-hidden="true">
        <div class="achievements-header">
          <h3 style="margin:0">Conquistas</h3>
          <span class="collection-count" id="achievementsCount">Você desbloqueou 0/0 conquistas</span>
        </div>
        <div class="achievements-grid" id="achievementsGrid"></div>
      </div>
    </div>
  </div>
</div>

<div id="saveToast" class="save-toast">salvo</div>
<div id="achievementToast" class="achievement-toast" aria-live="polite"></div>

<div id="collapseOverlay" class="collapse-overlay" aria-hidden="true">
  <div class="collapse-layer collapse-layer--crack" aria-hidden="true">
    <div class="collapse-crack" aria-hidden="true"></div>
  </div>
  <div class="collapse-layer collapse-layer--glitch" aria-hidden="true">
    <div class="collapse-glitch-bands"></div>
    <div class="collapse-glitch-noise"></div>
  </div>
  <div class="collapse-layer collapse-layer--blue" aria-hidden="true">
    <div class="collapse-blue-screen" role="presentation">
      <h2>UNIVERSO.EXE - RECUPERAÇÃO CRÍTICA</h2>
      <ul id="collapseBlueMessages" class="collapse-blue-messages" role="presentation"></ul>
    </div>
  </div>
  <div class="collapse-layer collapse-layer--logs" aria-hidden="true">
    <div class="collapse-log-screen" role="presentation">
      <div class="collapse-log-lines" id="collapseLogLines" role="presentation"></div>
    </div>
  </div>
</div>
  <script type="module" src="scripts/game-app.js"></script>
  
</body>
</html>
