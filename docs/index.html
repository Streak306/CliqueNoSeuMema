<!doctype html>
<meta charset="utf-8">
<title>Clique no seu Mema</title>
<style>
  body{font-family:system-ui;margin:40px;max-width:680px}
  .row{margin:14px 0}
  button{padding:10px 14px;border:1px solid #ccc;border-radius:10px;cursor:pointer}
  #pts{font-size:2rem;font-variant-numeric:tabular-nums}
  .pill{display:inline-block;padding:6px 10px;border:1px solid #ddd;border-radius:999px;margin-right:8px}

  /* imagem clicável */
  .click-img{
    width:180px;height:180px;object-fit:cover;
    border:1px solid #ccc;border-radius:14px;cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.15);
    transition:transform .06s ease, filter .15s ease;
    user-select:none;
  }
  .click-img:hover{ filter:brightness(1.05); }
  .click-img:active{ transform:translateY(1px) scale(.98); }
</style>

<h1>Clique no seu Mema</h1>

<div class="row">
  <span class="pill">Pontos: <b id="pts">0</b></span>
  <span class="pill">Por clique: <b id="pc">1</b></span>
  <span class="pill">Auto/s: <b id="cps">0</b></span>
</div>

<!-- IMAGEM que recebe o clique (começa de costas) -->
<div class="row">
  <img id="click" class="click-img" src="mema_back.png" alt="Clique no seu Mema">
</div>

<div class="row">
  <button id="buyAuto">Comprar Autoclick +1/s (Custo: <span id="costAuto">10</span>)</button>
</div>
<div class="row">
  <button id="buyPower">Aumentar Poder do Clique +1 (Custo: <span id="costPow">50</span>)</button>
</div>

<script>
/* --- estado do jogo --- */
let pts=0, clickPow=1, auto=0;
let costAuto=10, costPow=50;

/* --- imagens do Mema --- */
const IMG_BACK  = 'mema_back.png';
const IMG_FRONT = 'mema_front.png';
const FRONT_TIME_MS = 400; // fica de frente por 2s após cada clique
let faceTimer = null;

/* helpers */
const el=(id)=>document.getElementById(id);
function save(){ localStorage.setItem('mcw', JSON.stringify({pts,clickPow,auto,costAuto,costPow})); }
function load(){ try{
  const d = JSON.parse(localStorage.getItem('mcw')||'{}');
  pts=d.pts??0; clickPow=d.clickPow??1; auto=d.auto??0;
  costAuto=d.costAuto??10; costPow=d.costPow??50;
} catch(e){} }
function fmt(n){ return Math.round(n); }
function render(){
  el('pts').textContent=fmt(pts);
  el('pc').textContent=clickPow;
  el('cps').textContent=auto;
  el('costAuto').textContent=Math.ceil(costAuto);
  el('costPow').textContent=Math.ceil(costPow);
}

/* Mema vira de frente por 2s ao clicar e depois volta */
function showFront(){
  const img = el('click');
  img.src = IMG_FRONT;
  if (faceTimer) clearTimeout(faceTimer);
  faceTimer = setTimeout(()=>{ img.src = IMG_BACK; }, FRONT_TIME_MS);
}

/* compras */
function buyAuto(){
  if(pts>=costAuto){ pts-=costAuto; auto+=1; costAuto*=1.15; render(); save(); }
}
function buyPower(){
  if(pts>=costPow){ pts-=costPow; clickPow+=1; costPow*=1.25; render(); save(); }
}

/* loop de pontos automáticos */
function loop(){
  let last=performance.now();
  function tick(){
    const now=performance.now(), dt=(now-last)/1000; last=now;
    pts+=auto*dt; render();
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

/* preload das imagens para evitar “piscada” na primeira troca */
(new Image()).src = IMG_BACK;
(new Image()).src = IMG_FRONT;

/* inicialização */
load(); render(); loop();

/* clique na IMAGEM */
el('click').onclick=()=>{ pts+=clickPow; render(); save(); showFront(); };
el('buyAuto').onclick=buyAuto;
el('buyPower').onclick=buyPower;
</script>
